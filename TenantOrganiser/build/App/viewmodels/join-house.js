define(["services/logger","plugins/router","services/session","services/datacontext"],function(e,n,t,r){function o(){return d(v),e.log("Join House View Activated",null,"join-house",!0),u()}function a(){}function i(){return t.logout().then(function(){n.navigate("#login")})}function s(){return r.joinHouse(t.sessionUser,p()).then(function(){return u()})}function l(){var e=b();return b(null),r.cancelHouseRequest(e).then(u)}function c(){return r.createHouse(t.sessionUser,f(),g()).then(t.refreshSession).then(function(){n.navigate("#home")})}function u(){return r.getUsersJoinRequest(t.sessionUser,b)}function d(e){e("Welcome "+t.sessionUser().FirstName()+"!")}var v=new ko.observable,p=new ko.observable,f=new ko.observable,g=new ko.observable,b=new ko.observable,m={activate:o,title:"Join House",attached:a,pageHeader:v,joinHouseCode:p,createHouseName:f,createHouseCode:g,joinExistingHouseClicked:s,createNewHouseClicked:c,cancelRequestClicked:l,logoutClicked:i,houseJoinRequest:b};return m});