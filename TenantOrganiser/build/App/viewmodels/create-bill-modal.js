define(["plugins/dialog","services/datacontext","services/session","services/logger"],function(e,t,n,r){function i(t){return t?e.close(this,t):e.close(this)}function o(e){c(e)}function a(){if(!l())return r.logError("Bill name is required.",null,"create-bill-modal",!0),void 0;if("Select a recipient"===c().FullName)return r.logError("Bill manager is required.",null,"create-bill-modal",!0),void 0;var e=t.createBillType();e.Manager(c()),e.Name(l()),t.saveChanges().then(function(){return r.logSuccess(l()+" created.",null,"create-bill-modal",!0),s.close(this,!0)})}var s,l=new ko.observable,c=new ko.observable({FullName:"Select a recipient"}),u=new ko.observableArray,d=function(){this.input=ko.observable(""),this.clickedCombo=o,this.tenantsList=u,this.close=i,this.billName=l,this.manager=c,this.createBillType=a,s=this,t.getTenants(u,n.sessionUser().HouseId())};return d.prototype.ok=function(){e.close(this,this.input())},d.show=function(){return e.show(new d)},d});